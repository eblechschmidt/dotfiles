set -o vi

# local utility functions 
_have()      { type "$1" &>/dev/null; }
_source_if() { [[ -r "$1" ]] && source "$1"; }

# source different files
_source_if "$HOME/.config/bash/alias"
_source_if "$HOME/.config/bash/cd"
_source_if "$HOME/.config/bash/completion"
_source_if "$HOME/.config/bash/fzf"
_source_if "$HOME/.config/bash/history"

# theming
test -r ~/.config/bash/dir_colors && eval $(gdircolors ~/.config/bash/dir_colors)

# oh-my-posh
_have oh-my-posh && eval "$(oh-my-posh init bash  --config ~/.config/omp/config.yaml)"

# "bat" as manpager
export MANPAGER="sh -c 'col -bx | bat --theme=Nord -l man -p'"

### SHOPT
shopt -s autocd # change to named directory
shopt -s cdspell # autocorrects cd misspellings
shopt -s cmdhist # save multi-line commands in history as single line
shopt -s dotglob
shopt -s histappend # do not overwrite history
shopt -s checkwinsize # checks term size when bash regains control
